Class {
	#name : #Yaml2JsonTest,
	#superclass : #TestCase,
	#category : #YamlToJson
}

{ #category : #'as yet unclassified' }
Yaml2JsonTest >> testConvertPubSpecLockToJson [

	| pubspec y2j groundtruth json myJson resJson |
	pubspec := String streamContents: [ :str | 
		           str << '# Generated by pub
# See https://dart.dev/tools/pub/glossary#lockfile
packages:
  async:
    dependency: transitive
    description:
      name: async
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.8.2"
  auto_animated:
    dependency: "direct main"
    description:
      name: auto_animated
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.0"
  bl_microapp:
    dependency: "direct main"
    description:
      path: "."
      ref: develop
      resolved-ref: dc2f8a0606942795ed7de03e0bfd3f80dc0dd1f1
      url: "https://gitlab.forge.berger-levrault.com/bl-drit/bl.drit.experiments/software.engineering/flutter-micro-app-architecture/bl-microapp"
    source: git
    version: "0.0.1"
  boolean_selector:
    dependency: transitive
    description:
      name: boolean_selector
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
  characters:
    dependency: transitive
    description:
      name: characters
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.2.0"
  charcode:
    dependency: transitive
    description:
      name: charcode
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.3.1"
  clock:
    dependency: transitive
    description:
      name: clock
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.1.0"
  collection:
    dependency: transitive
    description:
      name: collection
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.15.0"
  crypto:
    dependency: transitive
    description:
      name: crypto
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.2"
  cupertino_icons:
    dependency: "direct main"
    description:
      name: cupertino_icons
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.3"
  dio:
    dependency: "direct main"
    description:
      name: dio
      url: "https://pub.dartlang.org"
    source: hosted
    version: "4.0.0"
  fake_async:
    dependency: transitive
    description:
      name: fake_async
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.2.0"
  ffi:
    dependency: transitive
    description:
      name: ffi
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.2.1"
  file:
    dependency: transitive
    description:
      name: file
      url: "https://pub.dartlang.org"
    source: hosted
    version: "6.1.4"
  fluro:
    dependency: transitive
    description:
      name: fluro
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.4"
  flutter:
    dependency: "direct main"
    description: flutter
    source: sdk
    version: "0.0.0"
  flutter_redux:
    dependency: transitive
    description:
      name: flutter_redux
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.8.2"
  flutter_staggered_grid_view:
    dependency: "direct main"
    description:
      name: flutter_staggered_grid_view
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.4.0"
  flutter_test:
    dependency: "direct dev"
    description: flutter
    source: sdk
    version: "0.0.0"
  get_it:
    dependency: transitive
    description:
      name: get_it
      url: "https://pub.dartlang.org"
    source: hosted
    version: "7.2.0"
  http_parser:
    dependency: transitive
    description:
      name: http_parser
      url: "https://pub.dartlang.org"
    source: hosted
    version: "4.0.0"
  injectable:
    dependency: transitive
    description:
      name: injectable
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.5.4"
  matcher:
    dependency: transitive
    description:
      name: matcher
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.12.11"
  material_floating_search_bar:
    dependency: "direct main"
    description:
      name: material_floating_search_bar
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.3.4"
  meta:
    dependency: transitive
    description:
      name: meta
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.7.0"
  nested:
    dependency: transitive
    description:
      name: nested
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.0.0"
  path:
    dependency: transitive
    description:
      name: path
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.8.0"
  path_provider:
    dependency: transitive
    description:
      name: path_provider
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.11"
  path_provider_android:
    dependency: transitive
    description:
      name: path_provider_android
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.12"
  path_provider_ios:
    dependency: transitive
    description:
      name: path_provider_ios
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.11"
  path_provider_linux:
    dependency: transitive
    description:
      name: path_provider_linux
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.7"
  path_provider_macos:
    dependency: transitive
    description:
      name: path_provider_macos
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.6"
  path_provider_platform_interface:
    dependency: transitive
    description:
      name: path_provider_platform_interface
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.4"
  path_provider_windows:
    dependency: transitive
    description:
      name: path_provider_windows
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.7"
  platform:
    dependency: transitive
    description:
      name: platform
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.1.0"
  plugin_platform_interface:
    dependency: transitive
    description:
      name: plugin_platform_interface
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.3"
  process:
    dependency: transitive
    description:
      name: process
      url: "https://pub.dartlang.org"
    source: hosted
    version: "4.2.4"
  provider:
    dependency: "direct main"
    description:
      name: provider
      url: "https://pub.dartlang.org"
    source: hosted
    version: "5.0.0"
  redux:
    dependency: transitive
    description:
      name: redux
      url: "https://pub.dartlang.org"
    source: hosted
    version: "5.0.0"
  redux_epics:
    dependency: transitive
    description:
      name: redux_epics
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.15.1"
  rxdart:
    dependency: transitive
    description:
      name: rxdart
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.27.7"
  sembast:
    dependency: transitive
    description:
      name: sembast
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.1.2"
  sky_engine:
    dependency: transitive
    description: flutter
    source: sdk
    version: "0.0.99"
  source_span:
    dependency: transitive
    description:
      name: source_span
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.8.1"
  stack_trace:
    dependency: transitive
    description:
      name: stack_trace
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.10.0"
  stream_channel:
    dependency: transitive
    description:
      name: stream_channel
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.0"
  string_scanner:
    dependency: transitive
    description:
      name: string_scanner
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.1.0"
  synchronized:
    dependency: transitive
    description:
      name: synchronized
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.0+3"
  term_glyph:
    dependency: transitive
    description:
      name: term_glyph
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.2.0"
  test_api:
    dependency: transitive
    description:
      name: test_api
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.4.3"
  typed_data:
    dependency: transitive
    description:
      name: typed_data
      url: "https://pub.dartlang.org"
    source: hosted
    version: "1.3.0"
  uuid:
    dependency: transitive
    description:
      name: uuid
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.7"
  vector_math:
    dependency: transitive
    description:
      name: vector_math
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.1.1"
  visibility_detector:
    dependency: "direct main"
    description:
      name: visibility_detector
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.2.2"
  webview_flutter:
    dependency: "direct main"
    description:
      name: webview_flutter
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.0.9"
  win32:
    dependency: transitive
    description:
      name: win32
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.5.2"
  xdg_directories:
    dependency: transitive
    description:
      name: xdg_directories
      url: "https://pub.dartlang.org"
    source: hosted
    version: "0.2.0+3"
sdks:
  dart: ">=2.15.0 <3.0.0"
  flutter: ">=2.8.0"
' ].


	"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%"

	groundtruth := '{
    "packages": {
        "async": {
            "dependency": "transitive",
            "description": {
                "name": "async",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.8.2"
        },
        "auto_animated": {
            "dependency": "direct main",
            "description": {
                "name": "auto_animated",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "3.0.0"
        },
        "bl_microapp": {
            "dependency": "direct main",
            "description": {
                "path": ".",
                "ref": "develop",
                "resolved-ref": "dc2f8a0606942795ed7de03e0bfd3f80dc0dd1f1",
                "url": "https://gitlab.forge.berger-levrault.com/bl-drit/bl.drit.experiments/software.engineering/flutter-micro-app-architecture/bl-microapp"
            },
            "source": "git",
            "version": "0.0.1"
        },
        "boolean_selector": {
            "dependency": "transitive",
            "description": {
                "name": "boolean_selector",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.1.0"
        },
        "characters": {
            "dependency": "transitive",
            "description": {
                "name": "characters",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.2.0"
        },
        "charcode": {
            "dependency": "transitive",
            "description": {
                "name": "charcode",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.3.1"
        },
        "clock": {
            "dependency": "transitive",
            "description": {
                "name": "clock",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.1.0"
        },
        "collection": {
            "dependency": "transitive",
            "description": {
                "name": "collection",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.15.0"
        },
        "crypto": {
            "dependency": "transitive",
            "description": {
                "name": "crypto",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "3.0.2"
        },
        "cupertino_icons": {
            "dependency": "direct main",
            "description": {
                "name": "cupertino_icons",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.0.3"
        },
        "dio": {
            "dependency": "direct main",
            "description": {
                "name": "dio",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "4.0.0"
        },
        "fake_async": {
            "dependency": "transitive",
            "description": {
                "name": "fake_async",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.2.0"
        },
        "ffi": {
            "dependency": "transitive",
            "description": {
                "name": "ffi",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.2.1"
        },
        "file": {
            "dependency": "transitive",
            "description": {
                "name": "file",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "6.1.4"
        },
        "fluro": {
            "dependency": "transitive",
            "description": {
                "name": "fluro",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.4"
        },
        "flutter": {
            "dependency": "direct main",
            "description": "flutter",
            "source": "sdk",
            "version": "0.0.0"
        },
        "flutter_redux": {
            "dependency": "transitive",
            "description": {
                "name": "flutter_redux",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.8.2"
        },
        "flutter_staggered_grid_view": {
            "dependency": "direct main",
            "description": {
                "name": "flutter_staggered_grid_view",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.4.0"
        },
        "flutter_test": {
            "dependency": "direct dev",
            "description": "flutter",
            "source": "sdk",
            "version": "0.0.0"
        },
        "get_it": {
            "dependency": "transitive",
            "description": {
                "name": "get_it",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "7.2.0"
        },
        "http_parser": {
            "dependency": "transitive",
            "description": {
                "name": "http_parser",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "4.0.0"
        },
        "injectable": {
            "dependency": "transitive",
            "description": {
                "name": "injectable",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.5.4"
        },
        "matcher": {
            "dependency": "transitive",
            "description": {
                "name": "matcher",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.12.11"
        },
        "material_floating_search_bar": {
            "dependency": "direct main",
            "description": {
                "name": "material_floating_search_bar",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.3.4"
        },
        "meta": {
            "dependency": "transitive",
            "description": {
                "name": "meta",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.7.0"
        },
        "nested": {
            "dependency": "transitive",
            "description": {
                "name": "nested",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.0.0"
        },
        "path": {
            "dependency": "transitive",
            "description": {
                "name": "path",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.8.0"
        },
        "path_provider": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.11"
        },
        "path_provider_android": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider_android",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.12"
        },
        "path_provider_ios": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider_ios",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.11"
        },
        "path_provider_linux": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider_linux",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.1.7"
        },
        "path_provider_macos": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider_macos",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.6"
        },
        "path_provider_platform_interface": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider_platform_interface",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.4"
        },
        "path_provider_windows": {
            "dependency": "transitive",
            "description": {
                "name": "path_provider_windows",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.7"
        },
        "platform": {
            "dependency": "transitive",
            "description": {
                "name": "platform",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "3.1.0"
        },
        "plugin_platform_interface": {
            "dependency": "transitive",
            "description": {
                "name": "plugin_platform_interface",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.1.3"
        },
        "process": {
            "dependency": "transitive",
            "description": {
                "name": "process",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "4.2.4"
        },
        "provider": {
            "dependency": "direct main",
            "description": {
                "name": "provider",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "5.0.0"
        },
        "redux": {
            "dependency": "transitive",
            "description": {
                "name": "redux",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "5.0.0"
        },
        "redux_epics": {
            "dependency": "transitive",
            "description": {
                "name": "redux_epics",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.15.1"
        },
        "rxdart": {
            "dependency": "transitive",
            "description": {
                "name": "rxdart",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.27.7"
        },
        "sembast": {
            "dependency": "transitive",
            "description": {
                "name": "sembast",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "3.1.2"
        },
        "sky_engine": {
            "dependency": "transitive",
            "description": "flutter",
            "source": "sdk",
            "version": "0.0.99"
        },
        "source_span": {
            "dependency": "transitive",
            "description": {
                "name": "source_span",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.8.1"
        },
        "stack_trace": {
            "dependency": "transitive",
            "description": {
                "name": "stack_trace",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.10.0"
        },
        "stream_channel": {
            "dependency": "transitive",
            "description": {
                "name": "stream_channel",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.1.0"
        },
        "string_scanner": {
            "dependency": "transitive",
            "description": {
                "name": "string_scanner",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.1.0"
        },
        "synchronized": {
            "dependency": "transitive",
            "description": {
                "name": "synchronized",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "3.0.0+3"
        },
        "term_glyph": {
            "dependency": "transitive",
            "description": {
                "name": "term_glyph",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.2.0"
        },
        "test_api": {
            "dependency": "transitive",
            "description": {
                "name": "test_api",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.4.3"
        },
        "typed_data": {
            "dependency": "transitive",
            "description": {
                "name": "typed_data",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "1.3.0"
        },
        "uuid": {
            "dependency": "transitive",
            "description": {
                "name": "uuid",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "3.0.7"
        },
        "vector_math": {
            "dependency": "transitive",
            "description": {
                "name": "vector_math",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.1.1"
        },
        "visibility_detector": {
            "dependency": "direct main",
            "description": {
                "name": "visibility_detector",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.2.2"
        },
        "webview_flutter": {
            "dependency": "direct main",
            "description": {
                "name": "webview_flutter",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.0.9"
        },
        "win32": {
            "dependency": "transitive",
            "description": {
                "name": "win32",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "2.5.2"
        },
        "xdg_directories": {
            "dependency": "transitive",
            "description": {
                "name": "xdg_directories",
                "url": "https://pub.dartlang.org"
            },
            "source": "hosted",
            "version": "0.2.0+3"
        }
    },
    "sdks": {
        "dart": ">=2.15.0 <3.0.0",
        "flutter": ">=2.8.0"
    }
}'.



	y2j := Yaml2Json new.
	myJson := STONJSON fromString: (y2j convertPubSpecLockToJson: pubspec).
	resJson := STONJSON fromString: groundtruth.

	^ self assert: myJson equals: resJson
]

{ #category : #'as yet unclassified' }
Yaml2JsonTest >> testConvertPubSpecYamlToJson [

	| pubspec y2j groundtruth json myJson resJson |
	pubspec := String streamContents: [ :str | 
		           str << 'name: anim_search
description: A new Flutter project.

# The following line prevents the package from being accidentally published to
# pub.dev using `pub publish`. This is preferred for private packages.
publish_to: ''none'' # Remove this line if you wish to publish to pub.dev

# The following defines the version and build number for your application.
# A version number is three numbers separated by dots, like 1.2.43
# followed by an optional build number separated by a +.
# Both the version and the builder number may be overridden in flutter
# build by specifying --build-name and --build-number, respectively.
# In Android, build-name is used as versionName while build-number used as versionCode.
# Read more about Android versioning at https://developer.android.com/studio/publish/versioning
# In iOS, build-name is used as CFBundleShortVersionString while build-number used as CFBundleVersion.
# Read more about iOS versioning at
# https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html
version: 1.0.0+1

environment:
  sdk: ">=2.12.0 <3.0.0"

dependencies:
  flutter:
    sdk: flutter
  provider: ^5.0.0
  dio: ^4.0.0
  flutter_staggered_grid_view: ^0.4.0
  material_floating_search_bar: ^0.3.4
  webview_flutter: ^2.0.9
  auto_animated: ^3.0.0
  # The following adds the Cupertino Icons font to your application.
  # Use with the CupertinoIcons class for iOS style icons.
  cupertino_icons: ^1.0.2
  bl_microapp:
    git:
      url: https://gitlab.forge.berger-levrault.com/bl-drit/bl.drit.experiments/software.engineering/flutter-micro-app-architecture/bl-microapp
      ref: develop
  visibility_detector: 0.2.2

dev_dependencies:
  flutter_test:
    sdk: flutter

# For information on the generic Dart part of this file, see the
# following page: https://dart.dev/tools/pub/pubspec

# The following section is specific to Flutter.
flutter:

  # The following line ensures that the Material Icons font is
  # included with your application, so that you can use the icons in
  # the material Icons class.
  uses-material-design: true

  # To add assets to your application, add an assets section, like this:
  # assets:
  #   - images/a_dot_burr.jpeg
  #   - images/a_dot_ham.jpeg

  # An image asset can refer to one or more resolution-specific "variants", see
  # https://flutter.dev/assets-and-images/#resolution-aware.

  # For details regarding adding assets from package dependencies, see
  # https://flutter.dev/assets-and-images/#from-packages

  # To add custom fonts to your application, add a fonts section here,
  # in this "flutter" section. Each entry in this list should have a
  # "family" key with the font family name, and a "fonts" key with a
  # list giving the asset and other descriptors for the font. For
  # example:
  # fonts:
  #   - family: Schyler
  #     fonts:
  #       - asset: fonts/Schyler-Regular.ttf
  #       - asset: fonts/Schyler-Italic.ttf
  #         style: italic
  #   - family: Trajan Pro
  #     fonts:
  #       - asset: fonts/TrajanPro.ttf
  #       - asset: fonts/TrajanPro_Bold.ttf
  #         weight: 700
  #
  # For details regarding fonts from package dependencies,
  # see https://flutter.dev/custom-fonts/#from-packages
' ].

	groundtruth := '{
    "name": "anim_search",
    "description": "A new Flutter project.",
    "publish_to": "none",
    "version": "1.0.0+1",
    "environment": {
        "sdk": ">=2.12.0 <3.0.0"
    },
    "dependencies": {
        "flutter": {
            "sdk": "flutter"
        },
        "provider": "^5.0.0",
        "dio": "^4.0.0",
        "flutter_staggered_grid_view": "^0.4.0",
        "material_floating_search_bar": "^0.3.4",
        "webview_flutter": "^2.0.9",
        "auto_animated": "^3.0.0",
        "cupertino_icons": "^1.0.2",
        "bl_microapp": {
            "git": {
                "url": "https://gitlab.forge.berger-levrault.com/bl-drit/bl.drit.experiments/software.engineering/flutter-micro-app-architecture/bl-microapp",
                "ref": "develop"
            }
        },
        "visibility_detector": "0.2.2"
    },
    "dev_dependencies": {
        "flutter_test": {
            "sdk": "flutter"
        }
    },
    "flutter": {
        "uses-material-design": true
    }
}'.



	y2j := Yaml2Json new.
	myJson := STONJSON fromString: (y2j convertPubSpecYamlToJson: pubspec).
	resJson := STONJSON fromString: groundtruth.

	^ self assert: myJson equals: resJson
]

{ #category : #'as yet unclassified' }
Yaml2JsonTest >> testConvertSmallPubSpecLockToJson [

	| pubspec y2j res json myJson resJson |
	pubspec := String streamContents: [ :str | 
		           str << '# comment dfsdf
packages:
  async:
    dependency: transitive
    description:
      name: async
      url: "https://pub.dartlang.org"
    source: hosted
    version: "2.8.2"
  auto_animated:
    dependency: "direct main"
    description:
      name: auto_animated
      url: "https://pub.dartlang.org"
    source: hosted
    version: "3.0.1"
  bl_microapp:
    dependency: "direct main"
    description:
      path: "."
      ref: develop
      resolved-ref: dc2f8a0606942795ed7de03e0bfd3f80dc0dd1f1
      url: "https://gitlab.forge.berger-levrault.com/bl-drit/bl.drit.experiments/software.engineering/flutter-micro-app-architecture/bl-microapp"
    source: git
    version: "0.0.1"' ].

	res := '{"packages":{"async":{"dependency":"transitive","description":{"name":"async","url":"https://pub.dartlang.org"},"source":"hosted","version":"2.8.2"},"auto_animated":{"dependency":"direct main","description":{"name":"auto_animated","url":"https://pub.dartlang.org"},"source":"hosted","version":"3.0.1"},"bl_microapp":{"dependency":"direct main","description":{"path":".","ref":"develop","resolved-ref":"dc2f8a0606942795ed7de03e0bfd3f80dc0dd1f1","url":"https://gitlab.forge.berger-levrault.com/bl-drit/bl.drit.experiments/software.engineering/flutter-micro-app-architecture/bl-microapp"},"source":"git","version":"0.0.1"}}}'.



	y2j := Yaml2Json new.
	myJson := STONJSON fromString: (y2j convertToJson: pubspec).
	resJson := STONJSON fromString: res.

	^ self assert: myJson equals: resJson
]
